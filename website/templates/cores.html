{% extends "base.html" %}
{% block title %}SpaceXhibit - Cores{% endblock %}

{% block content %} <!-- This is the content block, whatever you include here will be visible on the screen -->
<br/>
<header>
<h2> Cores </h2>
<p>
    This is the cores page, you can make searches or browse the cores in our database!
    {% if not current_user.is_admin %} Please <a href="/login">log in</a> to update, delete or add new core data. {% endif %}
</p>

    {% if current_user.is_admin %}
        <button type="button" class="btn btn-warning btn" data-toggle="modal" data-target="#add-core-modal">
            Add New Core
        </button>
    {% endif %}
<header>
<br/>
<table class = "table table-hover table-sm">
    <tr class = "table-active">
        <th>Serial</th>
        <th>Status</th>
        <th>Reuse Count</th>
        <th>Block</th>
        <th>Real Time Locating System Attempts</th>
        <th>Real Time Locating System Landings</th>
        <th>Autonomous Spaceport Drone Ship Attempts</th>
        <th>Autonomous Spaceport Drone Ship Landings</th>
        <th colspan="2">Edit</th>
    </tr>
    {% for core in cores %}
    <tr class>
        <td>
            {{core["serial"]}}
        </td>
        <td>
            {{core["status"]}}
        </td>
        <td>
            {{core["reuse_count"]}}
        </td>
        <td>
            {{core["block"]}}
        </td>
        <td>
            {{core["rtls_attempts"]}}
        </td>
        <td>
            {{core["rtls_landings"]}}
        </td>
        <td>
            {{core["asds_attempts"]}}
        </td>
        <td>
            {{core["asds_landings"]}}
        </td>
        {% if current_user.is_admin %}
        <td>
            <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" onclick="delete_core('{{ core.core_id }}')">
                Delete
            </button>
        </td>
        <td>
            <button type="button" class="btn btn-warning btn-sm" data-toggle="modal" data-target="#update-core-modal-{{ core.core_id }}">
              Update
            </button>
        </td>
        {% endif %}
    </tr>
    {% endfor %}
</table>

<!-- Add new core -->
<div class="modal fade" id="add-core-modal" tabindex="-1" role="dialog" aria-labelledby="add-core-modal-label" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="core-modal-label"> Add Core </h5>
        </div>
        <div class="modal-body"><form action="/add_core" method="POST" style="display: grid;">
          {{ core_form.csrf_token }}
          <div class="field">
              <label for="serial" class="form-label detail-field">Serial:</label>
              <div class="control detail-field">
                  {{ core_form.serial(class="form-control-sm")}}
              </div>
          </div>
          <div class="field">
              <label for="status" class="form-label detail-field">Status:</label>
              <div class="control detail-field">
                  {{ core_form.status(class="form-control-sm")}}
              </div>
          </div>
          <div class="field">
              <label for="reuse_count" class="form-label detail-field">Reuse Count:</label>
              <div class="control detail-field">
                  {{ core_form.reuse_count(class="form-control-sm")}}
              </div>
          </div>
          <div class="field">
            <label for="block" class="form-label detail-field">Block:</label>
            <div class="control detail-field">
                {{ core_form.block(class="form-control-sm")}}
            </div>
        </div>
          <div class="field">
              <label for="rtls_attempts" class="form-label detail-field">Real Time Locating System Attempts:</label>
              <div class="control detail-field">
                  {{ core_form.rtls_attempts(class="form-control-sm")}}
              </div>
          </div>
          <div class="field">
              <label for="rtls_landings" class="form-label detail-field">Real Time Locating System Landings:</label>
              <div class="control detail-field">
                  {{ core_form.rtls_landings(class="form-control-sm")}}
              </div>
          </div>
          <div class="field">
              <label for="asds_attempts" class="form-label detail-field">Autonomous Spaceport Drone Ship Attempts:</label>
              <div class="control detail-field">
                  {{ core_form.asds_attempts(class="form-control-sm")}}
              </div>
          </div>
          <div class="field">
              <label for="asds_landings" class="form-label detail-field">Autonomous Spaceport Drone Ship Landings:</label>
              <div class="control detail-field">
                  {{ core_form.asds_landings(class="form-control-sm")}}
              </div>
          </div>
  
          <button type=submit class="btn btn-warning">Add</button>
        </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  
 <!--Update table--> 
 {% for core in cores %}
    <div class="modal fade" id="update-core-modal-{{ core.core_id }}" tabindex="-1" role="dialog" aria-labelledby="update-core-modal-label-{{ core.core_id }}" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="core-modal-label-{{ core.core_id }}"> Update {{ core.serial }} </h5>
                </div>
                <div class="modal-body"><form action="/update_core" method="POST" style="display: grid;">
                    {{ core_form.csrf_token }}
                    <div class="field" style="display: none">
                        <div class="control">
                            {{ core_form.core_id(value=core.core_id, class="form-control-sm")}}
                        </div>
                    </div>
                    <div class="field">
                        <label for="serial" class="form-label detail-field">Serial:</label>
                        <div class="control detail-field">
                            {{ core_form.serial(value=core.serial,class="form-control-sm")}}
                        </div>
                    </div>
                    <div class="field">
                        <label for="status" class="form-label detail-field">Status:</label>
                        <div class="control detail-field">
                            {{ core_form.status(value=core.status,class="form-control-sm")}}
                        </div>
                    </div>
                    <div class="field">
                        <label for="reuse_count" class="form-label detail-field">Reuse Count:</label>
                        <div class="control detail-field">
                            {{ core_form.reuse_count(value=core.reuse_count,class="form-control-sm")}}
                        </div>
                    </div>
                    <div class="field">
                        <label for="block" class="form-label detail-field">Block:</label>
                        <div class="control detail-field">
                            {{ core_form.block(value=core.block,class="form-control-sm")}}
                        </div>
                    </div>
                    <div class="field">
                        <label for="rtls_attempts" class="form-label detail-field">Real Time Locating System Attempts:</label>
                        <div class="control detail-field">
                            {{ core_form.rtls_attempts(value=core.rtls_attempts,class="form-control-sm")}}
                        </div>
                    </div>
                    <div class="field">
                        <label for="rtls_landings" class="form-label detail-field">Real Time Locating System Landings:</label>
                        <div class="control detail-field">
                            {{ core_form.rtls_landings(value=core.rtls_landings,class="form-control-sm")}}
                        </div>
                    </div>
                    <div class="field">
                        <label for="asds_attempts" class="form-label detail-field">Autonomous Spaceport Drone Ship Attempts:</label>
                        <div class="control detail-field">
                            {{ core_form.asds_attempts(value=core.asds_attempts,class="form-control-sm")}}
                        </div>
                    </div>
                    <div class="field">
                        <label for="asds_landings" class="form-label detail-field">Autonomous Spaceport Drone Ship Landings:</label>
                        <div class="control detail-field">
                            {{ core_form.asds_landings(value=core.asds_landings,class="form-control-sm")}}
                        </div>
                    </div>
                    <button type=submit class="btn btn-warning">Update</button>
                </form>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
{% endfor %}

{% endblock %}