{% extends "base.html" %} <!-- This file inherits base.html --> 
{% block title %}SpaceXhibit - Launches{% endblock %} <!-- This is the Jinja syntax -->

{% block content %} <!-- This is the content block, whatever you include here will be visible on the screen -->

<div class = "bg-light bg-gradient">
    <br/>
    <div class="container">
        <div class = "card card-bg-warning"> 
            <div class = "card body"> 
                <h2 class = "card-title"> Launches </h2>
                <div class = "card-text" >
                    This is the launches page. You can browse, update, insert and delete entries to the launches in our database!
                    <br/> <br/>
                    <!-- Button triggered modal for inserting entries -->
                    <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#insertModal">
                        Insert New Entry
                    </button>
                      
                    <!-- Modal for inserting entries-->
                    <div class="modal fade" id="insertModal" tabindex="-1" aria-labelledby="insertModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="insertModalLabel">Insert New Entry</h5>
                                    <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <!-- Form to recieve new entry -->
                                    <form method="POST" action="add_launch">                  
                                        <label for="name" class="form-label">Name</label>
                                        <input type="text" class="form-control" name="name">
                                        <label for="date" class="form-label">Date</label>
                                        <input type="date" class="form-control" name="date">
                                        <label for="time" class="form-label">Time</label>
                                        <input type="text" class="form-control" name="time">
                                        <label for="rocket_id" class="form-label">Rocket ID</label>
                                        <input type="text" class="form-control" name="rocket_id">
                                        <label for="launchpad_id" class="form-label">Launchpad ID</label>
                                        <input type="text" class="form-control" name="launchpad_id">
                                        <label for="success" class="form-label">Success</label>
                                        <select class="form-select" name="success">
                                            <option>True</option>
                                            <option>False</option>
                                        </select>
                                        <label for="failure_reason" class="form-label">Failure Reason</label>
                                        <textarea type="text" class="form-control" name="failure_reason"></textarea>
                                        <label for="ship" class="form-label">Ship</label>
                                        <input type="text" class="form-control" name="ship">
                                        <label for="capsules" class="form-label">Capsules</label>
                                        <input type="text" class="form-control" name="capsules">
                                        
                                    <!-- End of Form-->
                                
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                            <button type="submit" class="btn btn-warning">Insert</button>
                                    </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /div above denotes the end of Modal for inserting entries-->
                    <!-- Button triggered modal for filtering entries -->
                    <button type="button" class="btn btn-warning" data-toggle="modal" data-target="#filterModal">
                        Filter
                    </button>
                    
                    <!-- Modal for filtering entries-->
                    <div class="modal fade" id="filterModal" tabindex="-1" aria-labelledby="filterModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="filterModalLabel">Filter</h5>
                                    <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <!-- Form to filter -->
                                    <form action="/launches" method="POST"> 
                                        <label for="fname" class="form-label">Name:</label>
                                        <input type="text" class="form-control" name="fname">                 
                                        <br> 
                                        <label for="fdate" class="form-label">Date:</label>
                                        <input type="date" class="form-control" name="ftype">
                                        <br>
                                        <label for="ftime" class="form-label">Time:</label>
                                        <input type="text" class="form-control" name="ftime">
                                        <br>
                                        <label for="frocket_id" class="form-label">Rocket Name:</label> 
                                        <input type="text" class="form-control" name="frocket_id">
                                        <br>
                                        <label for="flaunchpad_id" class="form-label">Launchpad Name:</label>
                                        <input type="text" class="form-control" name="flaunchpad_id">
                                        <br>
                                        <label for="fsuccess" class="form-label">Success?</label>
                                        <select class="form-select" name="success">
                                            <option value="">Choose</option>  
                                            <option value="True">True</option>
                                            <option value="False">False</option>
                                            <option value="None">None</option>
                                            <!-- Form to filter -->
                                        </select>
                                        <br>
                                        <label for="ffailure_reason" class="form-label">Failure Reason:</label>
                                        <input type="text" class="form-control" name="ffailure_reason">
                                        <br>
                                        <label for="fship" class="form-label">Ship:</label>
                                        <input type="text" class="form-control" name="fship">
                                        <br>
                                        <label for="fcapsules" class="form-label">Capsules:</label>
                                        <input type="text" class="form-control" name="fcapsules">
                                        
                                        
                                        <br>
                                        

                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                            <button type="submit" class = "btn btn-warning">Filter</button>
                                        </div>
                                        <!-- End of Form-->
                                    </form>      
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End of Card -->
    </div> 

    <br/>

    <div class = "container">
        <div class = "table-responsive">
            <table class = "table table-hover table-sm">
                <thead>
                    <tr class = "table-active">
                        <th>Name</th>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Rocket Name</th>
                        <th>Launchpad Name</th>
                        <th>Success</th>
                        <th>Failure Reason</th>
                        <th>Ship</th>
                        <th>Capsules</th>
                        <th colspan="2">Edit</th>
                    </tr>
                </thead>
                <tbody>
                    {% for launch in launches %}
                    <tr class>
                        <td>
                            {{launch["name"]}}
                        </td>
                        <td>
                            {{launch["date"]}}
                        </td>
                        <td>
                            {{launch["time"]}}
                        </td>
                        <td>
                            {{ rockets[launch["rocket_id"]] }}<!--   ID den  name alma eklenecek -->
                        </td>
                        <td>
                            {{ launchpads[launch["launchpad_id"]] }}<!--   ID den  name alma eklenecek -->
                        </td>
                        <td>
                            {{"No" if launch["success"] == "False" else "Yes"}}
                        </td>
                        <td>
                            {{"-" if launch["failure_reason"] == None else launch["failure_reason"]}}
                        </td>
                        <td>
                            {{"-" if launch["ship"] == None else launch["ship"]}}
                        </td>
                        <td>
                            {{"-" if launch["capsules"] == None else launch["capsules"]}}
                        </td>
                        <td>
                            <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" onclick="delete_launch('{{ launch.launch_id }}')">
                                Delete
                            </button>
                        </td>
                        <td>
                            <button type="button" class="btn btn-warning btn-sm" data-toggle="modal" data-target="#update-launch-modal-{{ launch.launch_id }}">
                              Update
                            </button>
                        </td>
                        
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>


<!-- This endblock denotes the end of the content block, nothing should come after it-->
{% endblock %}
